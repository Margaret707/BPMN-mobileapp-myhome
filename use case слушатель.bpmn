<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_0nesd0c" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.8.0" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.1.0">
  <bpmn:collaboration id="Collaboration_1kn6v62">
    <bpmn:participant id="Participant_0vjqdf7" name="слушатель" processRef="Process_1dfcuxc" />
    <bpmn:participant id="Participant_0oympbf" name="спикер" processRef="Process_0c2yakp" />
    <bpmn:participant id="Participant_1mnqlx3" name="система" processRef="Process_0tgxfw1" />
    <bpmn:participant id="Participant_08fqi4o" name="менеджер" processRef="Process_0x2zjf7" />
    <bpmn:messageFlow id="Flow_0ec8a4l" sourceRef="Activity_1qmyer9" targetRef="Activity_0218jj5" />
    <bpmn:messageFlow id="Flow_1i5r63o" sourceRef="Activity_1codnt3" targetRef="Activity_1rbwuba" />
    <bpmn:messageFlow id="Flow_1f6xhnn" sourceRef="Activity_1qmyer9" targetRef="Activity_0ewzb13" />
    <bpmn:messageFlow id="Flow_10peedf" sourceRef="Activity_0ewzb13" targetRef="Activity_1ury93x" />
    <bpmn:messageFlow id="Flow_0c2l4qs" sourceRef="Activity_0ewzb13" targetRef="Activity_1codnt3" />
    <bpmn:textAnnotation id="TextAnnotation_1k8o7ic">
      <bpmn:text>когда слушатель свернул приложение и ему приходится запускать его заново и сканировать QR код, то система подумает, что это новый пользователь? значит будет ошибка в подсчете количества подключений. создается циклический процесс по каждому сворачиванию приложения.</bpmn:text>
    </bpmn:textAnnotation>
  </bpmn:collaboration>
  <bpmn:process id="Process_1dfcuxc" isExecutable="true">
    <bpmn:startEvent id="StartEvent_1">
      <bpmn:outgoing>Flow_1kpxb65</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:exclusiveGateway id="Gateway_1b3dhnw">
      <bpmn:incoming>Flow_1kpxb65</bpmn:incoming>
      <bpmn:incoming>Flow_04s2c40</bpmn:incoming>
      <bpmn:incoming>Flow_0j2empi</bpmn:incoming>
      <bpmn:outgoing>Flow_1snhuyz</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_0vwkymj" name="запустилась трансляция мероприятия">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1girkj8</bpmn:incoming>
      <bpmn:outgoing>Flow_0vv9yif</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:manualTask id="Activity_1codnt3" name="отсканировал QR код">
      <bpmn:incoming>Flow_1snhuyz</bpmn:incoming>
      <bpmn:outgoing>Flow_1girkj8</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:endEvent id="Event_0p32w3r">
      <bpmn:incoming>Flow_0n3mtel</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:serviceTask id="Activity_0218jj5" name="трансляция закончилась">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0vv9yif</bpmn:incoming>
      <bpmn:outgoing>Flow_0n3mtel</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:boundaryEvent id="Event_1epelop" attachedToRef="Activity_0vwkymj">
      <bpmn:outgoing>Flow_0j2empi</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_17fn6vj" errorRef="Error_16bdsei" />
    </bpmn:boundaryEvent>
    <bpmn:boundaryEvent id="Event_1qsrxee" attachedToRef="Activity_1codnt3">
      <bpmn:outgoing>Flow_04s2c40</bpmn:outgoing>
      <bpmn:errorEventDefinition id="ErrorEventDefinition_1ems2y0" errorRef="Error_16bdsei" />
    </bpmn:boundaryEvent>
    <bpmn:sequenceFlow id="Flow_1kpxb65" sourceRef="StartEvent_1" targetRef="Gateway_1b3dhnw" />
    <bpmn:sequenceFlow id="Flow_04s2c40" sourceRef="Event_1qsrxee" targetRef="Gateway_1b3dhnw" />
    <bpmn:sequenceFlow id="Flow_0j2empi" sourceRef="Event_1epelop" targetRef="Gateway_1b3dhnw" />
    <bpmn:sequenceFlow id="Flow_1snhuyz" sourceRef="Gateway_1b3dhnw" targetRef="Activity_1codnt3" />
    <bpmn:sequenceFlow id="Flow_1girkj8" sourceRef="Activity_1codnt3" targetRef="Activity_0vwkymj" />
    <bpmn:sequenceFlow id="Flow_0vv9yif" sourceRef="Activity_0vwkymj" targetRef="Activity_0218jj5" />
    <bpmn:sequenceFlow id="Flow_0n3mtel" sourceRef="Activity_0218jj5" targetRef="Event_0p32w3r" />
    <bpmn:textAnnotation id="TextAnnotation_0ci72n3">
      <bpmn:text>во время трансляции: звонок на телефон, отключение телефона, переключение на камеру, отправку сообщений, другие приложения</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="TextAnnotation_09ps9v2">
      <bpmn:text>некорректный QR код</bpmn:text>
    </bpmn:textAnnotation>
  </bpmn:process>
  <bpmn:process id="Process_0c2yakp" isExecutable="false">
    <bpmn:subProcess id="Activity_0ewzb13" name="доступ к мероприятиям">
      <bpmn:property id="Property_0lkjeph" name="__targetRef_placeholder" />
      <bpmn:dataInputAssociation id="DataInputAssociation_0u5c3da">
        <bpmn:sourceRef>DataObjectReference_141vvg0</bpmn:sourceRef>
        <bpmn:targetRef>Property_0lkjeph</bpmn:targetRef>
      </bpmn:dataInputAssociation>
      <bpmn:endEvent id="Event_00br10r">
        <bpmn:incoming>Flow_0de3o6d</bpmn:incoming>
      </bpmn:endEvent>
      <bpmn:startEvent id="Event_11fohqh">
        <bpmn:outgoing>Flow_0de3o6d</bpmn:outgoing>
      </bpmn:startEvent>
      <bpmn:sequenceFlow id="Flow_0de3o6d" sourceRef="Event_11fohqh" targetRef="Event_00br10r" />
    </bpmn:subProcess>
  </bpmn:process>
  <bpmn:process id="Process_0tgxfw1" isExecutable="false">
    <bpmn:scriptTask id="Activity_0fwhqip" name="вести учет времени окончания трансляции мероприятия">
      <bpmn:extensionElements>
        <zeebe:properties>
          <zeebe:property />
        </zeebe:properties>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tld6x2</bpmn:incoming>
      <bpmn:outgoing>Flow_1tmxch1</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Activity_1rbwuba" name="вести учет времени действия QR кода">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1tld6x2</bpmn:outgoing>
      <bpmn:property id="Property_1bdin65" name="__targetRef_placeholder" />
    </bpmn:scriptTask>
    <bpmn:serviceTask id="Activity_1ury93x" name="создать мероприятие">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0cco6ql</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:scriptTask id="Activity_1pyqjx9" name="сгенерировать QR код">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0cco6ql</bpmn:incoming>
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1sgl61f">
        <bpmn:targetRef>DataObjectReference_141vvg0</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:scriptTask>
    <bpmn:dataObjectReference id="DataObjectReference_141vvg0" name="QR код мероприятия - действует&#10;24 часа" dataObjectRef="DataObject_1rvu9pk" />
    <bpmn:dataObject id="DataObject_1rvu9pk" />
    <bpmn:serviceTask id="Activity_1qmyer9" name="закрыть доступ к трансляции">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="taskDefiniton" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tmxch1</bpmn:incoming>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_1tld6x2" sourceRef="Activity_1rbwuba" targetRef="Activity_0fwhqip" />
    <bpmn:sequenceFlow id="Flow_1tmxch1" sourceRef="Activity_0fwhqip" targetRef="Activity_1qmyer9" />
    <bpmn:sequenceFlow id="Flow_0cco6ql" sourceRef="Activity_1ury93x" targetRef="Activity_1pyqjx9" />
  </bpmn:process>
  <bpmn:process id="Process_0x2zjf7" isExecutable="false" />
  <bpmn:error id="Error_16bdsei" name="Error_0k3d6pf" errorCode="Error_0k3d6pf" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1kn6v62">
      <bpmndi:BPMNShape id="Participant_1mnqlx3_di" bpmnElement="Participant_1mnqlx3" isHorizontal="true">
        <dc:Bounds x="160" y="330" width="1200" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0s5a4a0_di" bpmnElement="Activity_0fwhqip">
        <dc:Bounds x="730" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0b46xql_di" bpmnElement="Activity_1rbwuba">
        <dc:Bounds x="560" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0unrc7k" bpmnElement="Activity_1ury93x">
        <dc:Bounds x="210" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_071bck7" bpmnElement="Activity_1pyqjx9">
        <dc:Bounds x="330" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1a2jb0s" bpmnElement="DataObjectReference_141vvg0">
        <dc:Bounds x="462" y="415" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="446" y="364" width="68" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_063dfkn_di" bpmnElement="Activity_1qmyer9">
        <dc:Bounds x="990" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1tld6x2_di" bpmnElement="Flow_1tld6x2">
        <di:waypoint x="660" y="440" />
        <di:waypoint x="730" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tmxch1_di" bpmnElement="Flow_1tmxch1">
        <di:waypoint x="830" y="440" />
        <di:waypoint x="990" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_1o9yfiy" bpmnElement="Flow_0cco6ql">
        <di:waypoint x="310" y="440" />
        <di:waypoint x="330" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_08fqi4o_di" bpmnElement="Participant_08fqi4o" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1200" height="250" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_0vjqdf7_di" bpmnElement="Participant_0vjqdf7" isHorizontal="true">
        <dc:Bounds x="160" y="1020" width="1200" height="309" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0bnfzca" bpmnElement="TextAnnotation_0ci72n3">
        <dc:Bounds x="640" y="1248" width="309.98971394984324" height="49.99755094043887" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_09ps9v2_di" bpmnElement="TextAnnotation_09ps9v2">
        <dc:Bounds x="500" y="1183" width="100" height="40" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="339" y="1127" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1b3dhnw_di" bpmnElement="Gateway_1b3dhnw" isMarkerVisible="true">
        <dc:Bounds x="405" y="1120" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_083k60t_di" bpmnElement="Activity_0vwkymj">
        <dc:Bounds x="830" y="1105" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1i515i5_di" bpmnElement="Activity_1codnt3">
        <dc:Bounds x="540" y="1105" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0p32w3r_di" bpmnElement="Event_0p32w3r">
        <dc:Bounds x="1242" y="1127" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0meo6un_di" bpmnElement="Activity_0218jj5">
        <dc:Bounds x="1070" y="1105" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1epelop_di" bpmnElement="Event_1epelop">
        <dc:Bounds x="912" y="1167" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1qsrxee_di" bpmnElement="Event_1qsrxee">
        <dc:Bounds x="622" y="1167" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1kpxb65_di" bpmnElement="Flow_1kpxb65">
        <di:waypoint x="375" y="1145" />
        <di:waypoint x="405" y="1145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vv9yif_di" bpmnElement="Flow_0vv9yif">
        <di:waypoint x="930" y="1145" />
        <di:waypoint x="1070" y="1145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04s2c40_di" bpmnElement="Flow_04s2c40">
        <di:waypoint x="640" y="1203" />
        <di:waypoint x="640" y="1223" />
        <di:waypoint x="440" y="1223" />
        <di:waypoint x="440" y="1160" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0j2empi_di" bpmnElement="Flow_0j2empi">
        <di:waypoint x="930" y="1203" />
        <di:waypoint x="930" y="1298" />
        <di:waypoint x="430" y="1298" />
        <di:waypoint x="430" y="1170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1snhuyz_di" bpmnElement="Flow_1snhuyz">
        <di:waypoint x="455" y="1145" />
        <di:waypoint x="540" y="1145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1girkj8_di" bpmnElement="Flow_1girkj8">
        <di:waypoint x="640" y="1145" />
        <di:waypoint x="830" y="1145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0n3mtel_di" bpmnElement="Flow_0n3mtel">
        <di:waypoint x="1170" y="1145" />
        <di:waypoint x="1242" y="1145" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_0oympbf_di" bpmnElement="Participant_0oympbf" isHorizontal="true">
        <dc:Bounds x="160" y="610" width="1200" height="370" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_1cuf8ef" bpmnElement="Activity_0ewzb13" isExpanded="true">
        <dc:Bounds x="420" y="800" width="180" height="120" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0l2v6oz" bpmnElement="Event_00br10r">
        <dc:Bounds x="539" y="852" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0nzsshb" bpmnElement="Event_11fohqh">
        <dc:Bounds x="467" y="852" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_0tq0iyp" bpmnElement="Flow_0de3o6d">
        <di:waypoint x="503" y="870" />
        <di:waypoint x="539" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_1k8o7ic_di" bpmnElement="TextAnnotation_1k8o7ic" bioc:stroke="#831311" bioc:fill="#ffcdd2" color:background-color="#ffcdd2" color:border-color="#831311">
        <dc:Bounds x="410" y="1340" width="359.99951018808775" height="84.63949843260188" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0ec8a4l_di" bpmnElement="Flow_0ec8a4l">
        <di:waypoint x="1090" y="440" />
        <di:waypoint x="1120" y="440" />
        <di:waypoint x="1120" y="1105" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1i5r63o_di" bpmnElement="Flow_1i5r63o">
        <di:waypoint x="620" y="1105" />
        <di:waypoint x="620" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1f6xhnn_di" bpmnElement="Flow_1f6xhnn">
        <di:waypoint x="1010" y="400" />
        <di:waypoint x="1010" y="370" />
        <di:waypoint x="550" y="370" />
        <di:waypoint x="550" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_10peedf_di" bpmnElement="Flow_10peedf">
        <di:waypoint x="460" y="800" />
        <di:waypoint x="460" y="640" />
        <di:waypoint x="270" y="640" />
        <di:waypoint x="270" y="480" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="DataInputAssociation_0u5c3da_di" bpmnElement="DataInputAssociation_0u5c3da">
        <di:waypoint x="480" y="465" />
        <di:waypoint x="480" y="800" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_15fnad2" bpmnElement="DataOutputAssociation_1sgl61f">
        <di:waypoint x="430" y="440" />
        <di:waypoint x="460" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0c2l4qs_di" bpmnElement="Flow_0c2l4qs">
        <di:waypoint x="560" y="920" />
        <di:waypoint x="560" y="1105" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
